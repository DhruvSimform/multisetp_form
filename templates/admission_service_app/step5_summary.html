{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}Step 5 - Review & Confirm{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
        <div class="card p-4 shadow-sm">
            <h4 class="mb-4 text-center">Step 5: Review Your Information</h4>

            <ul class="list-group list-group-flush">
                <!-- Personal Info -->
                <li class="list-group-item">
                    <strong>Full Name:</strong> {{ form_data.first_name }} {{ form_data.last_name }}
                </li>
                <li class="list-group-item">
                    <strong>Email:</strong> {{ form_data.email }}
                </li>
                <li class="list-group-item">
                    <strong>Phone:</strong> {{ form_data.mobile }}
                </li>

                <!-- College -->
                <li class="list-group-item">
                    <strong>College:</strong> {{ college }}
                </li>

                <!-- Departments -->
                <li class="list-group-item">
                    <strong>Interested Departments:</strong>
                    {% if interested_departments %}
                        {% for dept in interested_departments %}
                            {{ dept.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    {% else %}
                        None selected
                    {% endif %}
                </li>

                <!-- Scores -->
                {% if form_data.jee_main_score %}
                    <li class="list-group-item"><strong>JEE Main Score:</strong> {{ form_data.jee_main_score }}</li>
                    <li class="list-group-item"><strong>Math Score:</strong> {{ form_data.math_score }}</li>
                {% endif %}
                {% if form_data.neet_score %}
                    <li class="list-group-item"><strong>NEET Score:</strong> {{ form_data.neet_score }}</li>
                    <li class="list-group-item"><strong>Biology Score:</strong> {{ form_data.biology_score }}</li>
                {% endif %}
                {% if form_data.physics_score %}
                    <li class="list-group-item"><strong>Physics Score:</strong> {{ form_data.physics_score }}</li>
                {% endif %}
                {% if form_data.chemistry_score %}
                    <li class="list-group-item"><strong>Chemistry Score:</strong> {{ form_data.chemistry_score }}</li>
                {% endif %}
            </ul>

            <form method="post" class="mt-4">
                {% csrf_token %}
                {{ wizard.management_form }}

                <!-- Confirmation checkbox -->
    <!-- Render confirmation checkbox using crispy-forms -->
                {{ form|crispy }}

                <div class="d-flex justify-content-between mt-4">
                    <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}" class="btn btn-outline-secondary">
                        ‚Üê Previous
                    </button>
                    <button type="submit" class="btn btn-success">
                        Confirm & Submit
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}